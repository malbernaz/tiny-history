!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t["tiny-history"]=n()}(this,function(){"use strict";function t(t){var n=document.createElement("a");return n.href=t,{pathname:"/"+n.pathname.split("/").filter(Boolean).join("/"),search:n.search,hash:n.hash}}function n(n,e){var r,o={state:e||null};if(void 0===n)r=t(location.href);else{var u=Math.random().toString(36).substr(2,5);r=t(n),o.key=u}return o.pathname=r.pathname,o.search=r.search,o.hash=r.hash,o}return function(){function t(t){r=t.state||o[0],e.forEach(function(t){return t(r,"POP")})}var e=[],r=n(),o=[r];return{go:function(t){return history.go(t)},back:function(){return history.back()},forward:function(){return history.forward()},get length(){return o.length},get location(){return r},listen:function(n){if("function"!=typeof n)throw Error("listener must be a function");return e.push(n),1===e.length&&addEventListener("popstate",t,!1),function(){(e=e.filter(function(t,r){return r!==e.indexOf(n)})).length||removeEventListener("popstate",t)}},push:function(t,u){r=n(t,u),o.push(r),history.pushState(r,null,t),e.forEach(function(t){return t(r,"PUSH")})},replace:function(t,u){r=n(t,u),o.pop(),o.push(r),history.replaceState(r,null,t),e.forEach(function(t){return t(r,"REPLACE")})}}}});
//# sourceMappingURL=tiny-history.js.map
