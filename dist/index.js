!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.History=e()}(this,function(){"use strict";function t(t){try{var e=t?new URL(t,location):new URL(location);if(!e.pathname)throw Error();return e}catch(e){var n=document.createElement("a");return n.href=t||location.href,{pathname:"/"+(t&&!n.pathname?location.pathname:n.pathname).split("/").filter(Boolean).join("/"),search:n.search,hash:n.hash}}}var e=function(){var t=this;this.listeners=[],this.location=this.createLocation(),this.entries=[this.location],this.go=function(t){return history.go(t)},this.back=function(){return history.back()},this.forward=function(){return history.forward()},this.handlePopState=function(e){var n=e.state;t.location=n||t.entries[0],t.listeners.forEach(function(e){return e(t.location,"POP")})},this.firstLocation=!0},n={length:{}};return n.length.get=function(){return this.entries.length},e.prototype.listen=function(t){var e=this;if("function"!=typeof t)throw Error("listener must be a function");return this.listeners.push(t),1===this.listeners.length&&addEventListener("popstate",this.handlePopState,!1),function(){e.listeners=e.listeners.filter(function(n,i){return i!==e.listeners.indexOf(t)}),e.listeners.length||removeEventListener("popstate",e.handlePopState)}},e.prototype.createLocation=function(e,n){var i,o={state:n||null};if(void 0===e)i=t();else{var r=Math.random().toString(36).substr(2,5);i=t(e),o.key=r}return o.pathname=i.pathname,o.search=i.search,o.hash=i.hash,o},e.prototype.push=function(t,e){var n=this;this.location=this.createLocation(t,e),this.entries.push(this.location),history.pushState(this.location,null,t),this.listeners.forEach(function(t){return t(n.location,"PUSH")})},e.prototype.replace=function(t,e){var n=this;this.location=this.createLocation(t,e),this.entries.pop(),this.entries.push(this.location),history.replaceState(this.location,null,t),this.listeners.forEach(function(t){return t(n.location,"REPLACE")})},Object.defineProperties(e.prototype,n),e});
//# sourceMappingURL=index.js.map
