"use strict";function createURL(t){try{var e=t?new URL(t,location):new URL(location);if(!e.pathname)throw Error();return e}catch(e){var n=document.createElement("a");return n.href=t||location.href,{pathname:"/"+(t&&!n.pathname?location.pathname:n.pathname).split("/").filter(Boolean).join("/"),search:n.search,hash:n.hash}}}function createLocation(t,e){var n,o={state:e||null};if(void 0===t)n=createURL();else{var i=Math.random().toString(36).substr(2,5);n=createURL(t),o.key=i}return o.pathname=n.pathname,o.search=n.search,o.hash=n.hash,o}var TinyHistory=function(){var t=this;this.listeners=[],this.location=createLocation(),this.entries=[this.location],this.go=function(t){return history.go(t)},this.goBack=function(){return history.back()},this.goForward=function(){return history.forward()},this.handlePopState=function(e){var n=e.state;t.location=n||t.entries[0],t.listeners.forEach(function(e){return e(t.location,"POP")})},this.firstLocation=!0},prototypeAccessors={length:{}};prototypeAccessors.length.get=function(){return this.entries.length},TinyHistory.prototype.listen=function(t){var e=this;if("function"!=typeof t)throw Error("listener must be a function");return this.listeners.push(t),1===this.listeners.length&&addEventListener("popstate",this.handlePopState,!1),function(){e.listeners=e.listeners.filter(function(n,o){return o!==e.listeners.indexOf(t)}),e.listeners.length||removeEventListener("popstate",e.handlePopState)}},TinyHistory.prototype.push=function(t,e){var n=this;this.location=createLocation(t,e),this.entries.push(this.location),history.pushState(this.location,null,t),this.listeners.forEach(function(t){return t(n.location,"PUSH")})},TinyHistory.prototype.replace=function(t,e){var n=this;this.location=createLocation(t,e),this.entries.pop(),this.entries.push(this.location),history.replaceState(this.location,null,t),this.listeners.forEach(function(t){return t(n.location,"REPLACE")})},Object.defineProperties(TinyHistory.prototype,prototypeAccessors),module.exports=TinyHistory;
//# sourceMappingURL=index.js.map
