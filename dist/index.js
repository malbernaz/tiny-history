!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.History=e()}(this,function(){"use strict";var t=function(){var t=this;this.listeners=[],this.location=this.createLocation(),this.entries=[this.location],this.go=function(t){return history.go(t)},this.back=function(){return history.back()},this.forward=function(){return history.forward()},this.handlePopState=function(e){var n=e.state;t.location=n||t.entries[0],t.listeners.forEach(function(e){return e(t.location,"POP")})}},e={length:{}};return e.length.get=function(){return this.entries.length},t.prototype.listen=function(t){var e=this;if("function"!=typeof t)throw Error("listener must be a function");return this.listeners.push(t),1===this.listeners.length&&addEventListener("popstate",this.handlePopState,!1),function(){e.listeners=e.listeners.filter(function(n,i){return i!==e.listeners.indexOf(t)}),e.listeners.length||removeEventListener("popstate",e.handlePopState)}},t.prototype.createLocation=function(t,e){void 0===t&&(t=location);var n,i={state:e||null};if(t instanceof Location)n=new URL(t);else{var o=Math.random().toString(36).substr(2,5);n=new URL(t,location),i.key=o}return i.pathname=n.pathname,i.search=n.search,i.hash=n.hash,i},t.prototype.push=function(t,e){var n=this;this.location=this.createLocation(t,e),this.entries.push(this.location),history.pushState(this.location,null,t),this.listeners.forEach(function(t){return t(n.location,"PUSH")})},t.prototype.replace=function(t,e){var n=this;this.location=this.createLocation(t,e),this.entries.pop(),this.entries.push(this.location),history.replaceState(this.location,null,t),this.listeners.forEach(function(t){return t(n.location,"REPLACE")})},Object.defineProperties(t.prototype,e),t});
//# sourceMappingURL=index.js.map
