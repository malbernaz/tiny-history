function parseURL(t){return a.href=t,{pathname:"/"+(a.pathname||location.pathname).split("/").filter(Boolean).join("/"),search:a.search,hash:a.hash}}function createLocation(t,n){var e,r={state:n||null};if(void 0===t)e=parseURL(location.href);else{var a=Math.random().toString(36).substr(2,5);e=parseURL(t),r.key=a}return r.pathname=e.pathname,r.search=e.search,r.hash=e.hash,r}function createHistory(){function t(t){o=t.state||i[0],a.forEach(function(t){return t(o,"POP")})}function n(n){if("function"!=typeof n)throw Error("listener must be a function");return a.push(n),1===a.length&&addEventListener("popstate",t,!1),function(){(a=a.filter(function(t,e){return e!==a.indexOf(n)})).length||removeEventListener("popstate",t)}}function e(t,n){o=createLocation(t,n),i.push(o),history.pushState(o,null,t),a.forEach(function(t){return t(o,"PUSH")})}function r(t,n){o=createLocation(t,n),i.pop(),i.push(o),history.replaceState(o,null,t),a.forEach(function(t){return t(o,"REPLACE")})}var a=[],o=createLocation(),i=[o];return{go:function(t){return history.go(t)},back:function(){return history.back()},forward:function(){return history.forward()},get length(){return i.length},get location(){return o},listen:n,push:e,replace:r}}var a=document.createElement("a");export default createHistory;
//# sourceMappingURL=tiny-history.esm.mjs.map
